(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{160:function(t,e,s){"use strict";s.r(e);var a=s(18),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"数据库-mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库-mysql","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据库(Mysql)")]),t._v(" "),s("p",[t._v("数据库使用主要采用bookshelf.js, sequelize.js。")]),t._v(" "),s("h2",{attrs:{id:"bookshelf-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bookshelf-js","aria-hidden":"true"}},[t._v("#")]),t._v(" bookshelf.js")]),t._v(" "),s("h1",{attrs:{id:"bookshelf-js-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bookshelf-js-2","aria-hidden":"true"}},[t._v("#")]),t._v(" bookshelf.js")]),t._v(" "),s("p",[t._v("Bookshelf is a JavaScript ORM for Node.js, built on the "),s("a",{attrs:{href:"http://knexjs.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("Knex"),s("OutboundLink")],1),t._v(" SQL query builder. It features both Promise-based and traditional callback interfaces, transaction support, eager/nested-eager relation loading, polymorphic associations, and support for one-to-one, one-to-many, and many-to-many relations.")]),t._v(" "),s("p",[t._v("It is designed to work with PostgreSQL, MySQL, and SQLite3.")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://bookshelfjs.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("Website and documentation"),s("OutboundLink")],1),t._v(". The project is "),s("a",{attrs:{href:"http://github.com/bookshelf/bookshelf/",target:"_blank",rel:"noopener noreferrer"}},[t._v("hosted on GitHub"),s("OutboundLink")],1),t._v(", and has a comprehensive "),s("a",{attrs:{href:"https://travis-ci.org/bookshelf/bookshelf",target:"_blank",rel:"noopener noreferrer"}},[t._v("test suite"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"introduction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#introduction","aria-hidden":"true"}},[t._v("#")]),t._v(" Introduction")]),t._v(" "),s("p",[t._v("Bookshelf aims to provide a simple library for common tasks when querying databases in JavaScript, and forming relations between these objects, taking a lot of ideas from the the "),s("a",{attrs:{href:"http://en.wikipedia.org/wiki/Data_mapper_pattern",target:"_blank",rel:"noopener noreferrer"}},[t._v("Data Mapper Pattern"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("With a concise, literate codebase, Bookshelf is simple to read, understand, and extend. It doesn't force you to use any specific validation scheme, and provides flexible, efficient relation/nested-relation loading and first-class transaction support.")]),t._v(" "),s("p",[t._v("It's a lean object-relational mapper, allowing you to drop down to the raw Knex interface whenever you need a custom query that doesn't quite fit with the stock conventions.")]),t._v(" "),s("h2",{attrs:{id:"installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),s("p",[t._v("You'll need to install a copy of "),s("a",{attrs:{href:"http://knexjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Knex"),s("OutboundLink")],1),t._v(", and either "),s("code",[t._v("mysql")]),t._v(", "),s("code",[t._v("pg")]),t._v(", or "),s("code",[t._v("sqlite3")]),t._v(" from npm.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("$ npm install knex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("save\n$ npm install bookshelf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("save\n\n# Then add one "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" the following"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n$ npm install pg\n$ npm install mysql\n$ npm install mariasql\n$ npm install sqlite3\n")])])]),s("p",[t._v("The Bookshelf library is initialized by passing an initialized "),s("a",{attrs:{href:"http://knexjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Knex"),s("OutboundLink")],1),t._v(" client instance. The "),s("a",{attrs:{href:"http://knexjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Knex documentation"),s("OutboundLink")],1),t._v(" provides a number of examples for different databases.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" knex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'knex'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysql'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  connection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    host     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    user     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'your_database_user'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    password "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'your_database_password'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    database "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myapp_test'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    charset  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bookshelf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bookshelf'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("knex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" User "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bookshelf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  tableName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'users'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("This initialization should likely only ever happen once in your application. As it creates a connection pool for the current database, you should use the "),s("code",[t._v("bookshelf")]),t._v(" instance returned throughout your library. You'll need to store this instance created by the initialize somewhere in the application so you can reference it. A common pattern to follow is to initialize the client in a module so you can easily reference it later:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// In a file named something like bookshelf.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" knex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'knex'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dbConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bookshelf'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("knex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// elsewhere, to use the bookshelf client:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bookshelf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./bookshelf'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" Post "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bookshelf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"examples"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#examples","aria-hidden":"true"}},[t._v("#")]),t._v(" Examples")]),t._v(" "),s("p",[t._v("Here is an example to get you started:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" knex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'knex'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysql'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  connection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MYSQL_DATABASE_CONNECTION")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bookshelf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bookshelf'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("knex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" User "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bookshelf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  tableName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'users'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  posts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasMany")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Posts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" Posts "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bookshelf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  tableName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'messages'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  tags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("belongsToMany")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" Tag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bookshelf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  tableName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tags'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nUser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("where")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("withRelated"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'posts.tags'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("related")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'posts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toJSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugins","aria-hidden":"true"}},[t._v("#")]),t._v(" Plugins")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/bookshelf/bookshelf/wiki/Plugin:-Model-Registry",target:"_blank",rel:"noopener noreferrer"}},[t._v("Registry"),s("OutboundLink")],1),t._v(": Register models in a central location so that you can refer to them using a string in relations instead of having to require it every time. Helps deal with the challenges of circular module dependencies in Node.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/bookshelf/bookshelf/wiki/Plugin:-Virtuals",target:"_blank",rel:"noopener noreferrer"}},[t._v("Virtuals"),s("OutboundLink")],1),t._v(": Define virtual properties on your model to compute new values.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/bookshelf/bookshelf/wiki/Plugin:-Visibility",target:"_blank",rel:"noopener noreferrer"}},[t._v("Visibility"),s("OutboundLink")],1),t._v(": Specify a whitelist/blacklist of model attributes when serialized toJSON.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/bookshelf/bookshelf/wiki/Plugin:-Pagination",target:"_blank",rel:"noopener noreferrer"}},[t._v("Pagination"),s("OutboundLink")],1),t._v(": Adds "),s("code",[t._v("fetchPage")]),t._v(" methods to use for pagination in place of "),s("code",[t._v("fetch")]),t._v(" and "),s("code",[t._v("fetchAll")]),t._v(".")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/bookshelf/bookshelf/wiki/Plugin:-Case-Converter",target:"_blank",rel:"noopener noreferrer"}},[t._v("Case Converter"),s("OutboundLink")],1),t._v(": Handles the conversion between the database's snake_cased and a model's camelCased properties automatically.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/bookshelf/bookshelf/wiki/Plugin:-Processor",target:"_blank",rel:"noopener noreferrer"}},[t._v("Processor"),s("OutboundLink")],1),t._v(": Allows defining custom processor functions that handle transformation of values whenever they are "),s("code",[t._v(".set()")]),t._v(" on a model.")])]),t._v(" "),s("h2",{attrs:{id:"community-plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#community-plugins","aria-hidden":"true"}},[t._v("#")]),t._v(" Community plugins")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/seegno/bookshelf-cascade-delete",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-cascade-delete"),s("OutboundLink")],1),t._v(" - Cascade delete related models on destroy.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/seegno/bookshelf-json-columns",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-json-columns"),s("OutboundLink")],1),t._v(" - Parse and stringify JSON columns on save and fetch instead of manually define hooks for each model (PostgreSQL and SQLite).")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/seegno/bookshelf-mask",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-mask"),s("OutboundLink")],1),t._v(" - Similar to "),s("a",{attrs:{href:"https://github.com/bookshelf/bookshelf/wiki/Plugin:-Visibility",target:"_blank",rel:"noopener noreferrer"}},[t._v("Visibility"),s("OutboundLink")],1),t._v(" but supporting multiple scopes, masking models and collections using the "),s("a",{attrs:{href:"https://github.com/nemtsov/json-mask",target:"_blank",rel:"noopener noreferrer"}},[t._v("json-mask"),s("OutboundLink")],1),t._v(" API.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/bogus34/bookshelf-schema",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-schema"),s("OutboundLink")],1),t._v(" - A plugin for handling fields, relations, scopes and more.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/bogus34/bookshelf-signals",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-signals"),s("OutboundLink")],1),t._v(" - A plugin that translates Bookshelf events to a central hub.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/estate/bookshelf-paranoia",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-paranoia"),s("OutboundLink")],1),t._v(" - Protect your database from data loss by soft deleting your rows.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/estate/bookshelf-uuid",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-uuid"),s("OutboundLink")],1),t._v(" - Automatically generates UUIDs for your models.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/bsiddiqui/bookshelf-modelbase",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-modelbase"),s("OutboundLink")],1),t._v(" - An alternative to extend "),s("code",[t._v("Model")]),t._v(", adding timestamps, attribute validation and some native CRUD methods.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/sequiturs/bookshelf-advanced-serialization",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-advanced-serialization"),s("OutboundLink")],1),t._v(" - A more powerful visibility plugin, supporting serializing models and collections according to access permissions, application context, and after ensuring relations have been loaded.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/popodidi/bookshelf-plugin-mode",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-plugin-mode"),s("OutboundLink")],1),t._v(" - Plugin inspired by "),s("a",{attrs:{href:"https://github.com/tgriesser/bookshelf/wiki/Plugin:-Visibility",target:"_blank",rel:"noopener noreferrer"}},[t._v("Visibility"),s("OutboundLink")],1),t._v(" plugin, providing functionality to specify different modes with corresponding visible/hidden fields of model.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/venables/bookshelf-secure-password",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-secure-password"),s("OutboundLink")],1),t._v(" - A plugin for easily securing passwords using bcrypt.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/DJAndries/bookshelf-default-select",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-default-select"),s("OutboundLink")],1),t._v(" - Enables default column selection for models. Inspired by "),s("a",{attrs:{href:"https://github.com/tgriesser/bookshelf/wiki/Plugin:-Visibility",target:"_blank",rel:"noopener noreferrer"}},[t._v("Visibility"),s("OutboundLink")],1),t._v(", but operates on the database level.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/DJAndries/bookshelf-ez-fetch",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-ez-fetch"),s("OutboundLink")],1),t._v(" - Convenient fetching methods which allow for compact filtering, relation selection and error handling.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/ericclemmons/bookshelf-manager",target:"_blank",rel:"noopener noreferrer"}},[t._v("bookshelf-manager"),s("OutboundLink")],1),t._v(" - Model & Collection manager to make it easy to create & save deep, nested JSON structures from API requests.")])]),t._v(" "),s("h2",{attrs:{id:"sequelize"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sequelize","aria-hidden":"true"}},[t._v("#")]),t._v(" Sequelize")]),t._v(" "),s("p",[t._v("Sequelize is a promise-based Node.js ORM for Postgres, MySQL, MariaDB, SQLite and Microsoft SQL Server. It features solid transaction support, relations, eager and lazy loading, read replication and more.")]),t._v(" "),s("p",[t._v("Sequelize follows "),s("a",{attrs:{href:"http://semver.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("SEMVER"),s("OutboundLink")],1),t._v(". Supports Node v6 and above to use ES6 features.")]),t._v(" "),s("p",[t._v("New to Sequelize? Take a look at the "),s("a",{attrs:{href:"http://docs.sequelizejs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tutorials and Guides"),s("OutboundLink")],1),t._v(". You might also be interested in the "),s("a",{attrs:{href:"http://docs.sequelizejs.com/identifiers",target:"_blank",rel:"noopener noreferrer"}},[t._v("API Reference"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"v5-release"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#v5-release","aria-hidden":"true"}},[t._v("#")]),t._v(" v5 Release")]),t._v(" "),s("p",[t._v("You can find the upgrade guide and changelog "),s("a",{attrs:{href:"http://docs.sequelizejs.com/manual/upgrade-to-v5.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"table-of-contents"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents","aria-hidden":"true"}},[t._v("#")]),t._v(" Table of Contents")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#installation"}},[t._v("Installation")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#documentation"}},[t._v("Documentation")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#responsible-disclosure"}},[t._v("Responsible disclosure")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#resources"}},[t._v("Resources")])])]),t._v(" "),s("h2",{attrs:{id:"installation-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save sequelize "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This will install v5")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# And one of the following:")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save pg pg-hstore "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Postgres")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save mysql2\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save mariadb\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save sqlite3\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save tedious "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Microsoft SQL Server")]),t._v("\n")])])]),s("h2",{attrs:{id:"documentation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#documentation","aria-hidden":"true"}},[t._v("#")]),t._v(" Documentation")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://docs.sequelizejs.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("v5 Documentation"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/sequelize/sequelize/blob/v4/docs",target:"_blank",rel:"noopener noreferrer"}},[t._v("v4 Documentation"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://sequelize.readthedocs.io/en/v3/",target:"_blank",rel:"noopener noreferrer"}},[t._v("v3 Documentation"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/sequelize/sequelize/blob/master/CONTRIBUTING.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Contributing"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"responsible-disclosure"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#responsible-disclosure","aria-hidden":"true"}},[t._v("#")]),t._v(" Responsible disclosure")]),t._v(" "),s("p",[t._v("If you have any security issue to report, contact project maintainers privately. You can find contact information in "),s("a",{attrs:{href:"https://github.com/sequelize/sequelize/blob/master/CONTACT.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("CONTACT.md"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"resources"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resources","aria-hidden":"true"}},[t._v("#")]),t._v(" Resources")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/sequelize/sequelize/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changelog"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://sequelize-slack.herokuapp.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Slack"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://stackoverflow.com/questions/tagged/sequelize.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Stack Overflow"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"tools"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tools","aria-hidden":"true"}},[t._v("#")]),t._v(" Tools")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://docs.sequelizejs.com/manual/typescript.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sequelize & TypeScript"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/RobinBuschmann/sequelize-typescript",target:"_blank",rel:"noopener noreferrer"}},[t._v("Enhanced TypeScript with decorators"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/mickhansen/graphql-sequelize",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sequelize & GraphQL"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://docs.sequelizejs.com/manual/resources.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Add-ons & Plugins"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/sequelize/cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sequelize CLI"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"learning"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#learning","aria-hidden":"true"}},[t._v("#")]),t._v(" Learning")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://docs.sequelizejs.com/manual/getting-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("Getting Started"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/sequelize/express-example",target:"_blank",rel:"noopener noreferrer"}},[t._v("Express Example"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"translations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#translations","aria-hidden":"true"}},[t._v("#")]),t._v(" Translations")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://docs.sequelizejs.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("English v5"),s("OutboundLink")],1),t._v(" (OFFICIAL)")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/demopark/sequelize-docs-Zh-CN",target:"_blank",rel:"noopener noreferrer"}},[t._v("中文文档 v4/v5"),s("OutboundLink")],1),t._v(" (UNOFFICIAL)")])])])},[],!1,null,null,null);n.options.__file="mysql.md";e.default=n.exports}}]);